(this.webpackJsonpspa_user_list=this.webpackJsonpspa_user_list||[]).push([[0],{130:function(e,t,r){},131:function(e,t,r){},152:function(e,t,r){},159:function(e,t,r){},228:function(e,t,r){},230:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r.n(n),a=r(31),c=r.n(a),u=(r(152),r(80)),i=r(41),o=r(74),d=r(133),j=r(57),l=r(23),b=r(24),p=r.n(b),f=r(36),O="app/SET_IS_FETCHING",h="app/SET_ERROR",x=function(e,t){return{type:O,key:e,status:t}},m=function(e,t){return{type:h,key:e,message:t}},v={isFetching:{},error:{}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:if(e.isFetching[t.key]&&!t.status){var r=Object(l.a)({},e);return delete r.isFetching[t.key],r}return!e.isFetching[t.key]&&t.status?Object(l.a)(Object(l.a)({},e),{},{isFetching:Object(l.a)(Object(l.a)({},e.isFetching),{},Object(j.a)({},t.key,t.status))}):e;case h:if(e.error[t.key]&&!t.message){var n=Object(l.a)({},e);return delete n.error[t.key],n}return t.message?Object(l.a)(Object(l.a)({},e),{},{error:Object(l.a)(Object(l.a)({},e.error),{},Object(j.a)({},t.key,{message:t.message}))}):e;default:return e}},y=r(143),k=r(115);r(158),k.a.initializeApp({apiKey:"AIzaSyCgj4ixMcBf3GkAKxEgc9nl3io8g0nVGEI",authDomain:"testing-fb-server.firebaseapp.com",projectId:"testing-fb-server"});var I=k.a.firestore(),w={getUsers:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,I.collection("users").get();case 3:return e.sent.forEach((function(e){var r=e.id,n=e.data();t.push(Object(l.a)(Object(l.a)({},n),{},{id:r}))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addUser:function(e){return Object(f.a)(p.a.mark((function t(){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={name:e.name,phone:e.phone,surname:"surname"},t.next=3,I.collection("users").add(r);case 3:if(!(n=t.sent)||!n.id){t.next=6;break}return t.abrupt("return",Object(l.a)(Object(l.a)({},r),{},{id:n.id}));case 6:case"end":return t.stop()}}),t)})))()},updateUser:function(e){return Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.collection("users").doc(e.id).set(e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.collection("users").doc(e).delete();case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})))()}},E=function(e,t){return!!e.app.isFetching[t]},U=function(e,t){return e.app.error[t]?e.app.error[t]:null},S=r(144);function F(e,t){return function(){var r=Object(f.a)(p.a.mark((function r(n,s){var a,c,u,o;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,E(s(),e)){r.next=8;break}return Object(i.b)((function(){n(m(e,null)),n(x(e,!0))})),r.next=6,t(n,s);case 6:a=r.sent,Object(i.b)((function(){n(x(e,!1)),a||n(m(e,"Nothing Found"))}));case 8:r.next=16;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0),o=(null===(c=r.t0.data)||void 0===c?void 0:c.message)?null===(u=r.t0.data)||void 0===u?void 0:u.message:"Something went wrong. Try again later.",S.b.error(o),Object(i.b)((function(){n(m(e,o)),n(x(e,!1))}));case 16:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e,t){return r.apply(this,arguments)}}()}var C="users/SET_FETCHED_USERS",N="users/SET_EDITING_USER",_="users/UPDATE_USER_SUCCESS",T="users/DELETE_USER_SUCCESS",D=function(e){return{type:T,userId:e}},R="_NEW_USER",P={id:R,name:"",surname:"",phone:""},A={users:Object(j.a)({},R,P),usersIds:[],editingUserId:null},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:var r=Object(l.a)({},e),n=[];return t.data.forEach((function(e){r.users[e.id]=e,n.push(e.id)})),r.usersIds=n,r;case _:var s=Object(l.a)({},e);return e.users[t.data.id]?s.users[t.data.id]=Object(l.a)(Object(l.a)({},s.users[t.data.id]),t.data):(s.usersIds=[].concat(Object(y.a)(s.usersIds),[t.data.id]),s.users[t.data.id]=t.data),e.editingUserId&&(s.editingUserId=null),s;case T:var a=Object(l.a)({},e);return delete a.users[t.userId],a.usersIds=a.usersIds.filter((function(e){return e!==t.userId})),a;case N:return Object(l.a)(Object(l.a)({},e),{},{editingUserId:t.data});default:return e}},B=Object(o.c)({app:g,users:G}),L=Object(o.d)(B,Object(o.a)(d.a)),M=r(94),q=r(95),z=r(99),H=r(98),J=r(19),K=r(147),V=r(236),W=r(237),Q=function(e,t){return e.users.users[t]?e.users.users[t]:null},X=function(e,t){return e.users.editingUserId===t},Y=r(234),Z=r(235),$=r(76),ee=(r(159),r(9)),te=function(e){var t=e.user,r=Object(i.d)();return Object(ee.jsxs)(Y.a,{className:"row",name:"user",initialValues:t||{},onFinish:function(e){r(function(e){return F("user",function(){var t=Object(f.a)(p.a.mark((function t(r){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id!==R){t.next=6;break}return t.next=3,w.addUser(e);case 3:n=t.sent,t.next=9;break;case 6:return t.next=8,w.updateUser(e);case 8:n=t.sent;case 9:if(!n){t.next=12;break}return r({type:_,data:n}),t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(Object(l.a)({id:t?t.id:R},e))),console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(ee.jsx)(Y.a.Item,{name:"name",rules:[{required:!0,message:"Please input your username!"}],children:Object(ee.jsx)(Z.a,{placeholder:"Username"})}),Object(ee.jsx)(Y.a.Item,{name:"phone",rules:[{required:!0,message:"Please input your phone!"}],children:Object(ee.jsx)(Z.a,{placeholder:"Phone"})}),Object(ee.jsx)(Y.a.Item,{children:Object(ee.jsx)($.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})},re=(r(130),function(e){var t=e.userId,r=Object(i.e)((function(e){return{user:Q(e,t),isEditing:X(e,t)}})),s=r.user,a=r.isEditing,c=Object(i.d)(),u=Object(n.useCallback)((function(){c({type:N,data:a?null:t})}),[a]),o=Object(n.useCallback)((function(){c(function(e){return F("user",function(){var t=Object(f.a)(p.a.mark((function t(r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.deleteUser(e);case 2:if(!t.sent){t.next=6;break}return r(D(e)),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(t))}),[a]);return s?a?Object(ee.jsxs)("div",{className:"user-item-wrapper",children:[Object(ee.jsx)(te,{user:s}),Object(ee.jsx)(K.a,{onClick:u,className:"fixed-delete-button"})]}):Object(ee.jsxs)("div",{className:"user-item-wrapper",children:[Object(ee.jsx)(V.a,{className:"user-info-icon"}),Object(ee.jsxs)("div",{className:"row user-info",onDoubleClick:u,children:[Object(ee.jsxs)("span",{children:[Object(ee.jsx)("small",{style:{margin:"0 1rem"},children:"Name:"}),s.name]}),Object(ee.jsxs)("span",{children:[Object(ee.jsx)("small",{style:{margin:"0 1rem"},children:"Phone:"}),s.phone]})]}),Object(ee.jsx)(W.a,{style:{color:"#ff0000"},onClick:o,className:"fixed-delete-button"})]}):null}),ne=function(e){var t=e.userIds;return Object(ee.jsxs)("div",{className:"user-list-page",children:[Object(ee.jsxs)("div",{style:{padding:"20px"},children:[Object(ee.jsx)("h2",{children:"Add new user."}),Object(ee.jsx)(te,{})]}),Object(ee.jsx)("div",{className:"user-list-wrapper",children:t.map((function(e){return Object(ee.jsx)(re,{userId:e})}))})]})},se=r(233),ae=(r(228),function(e){Object(z.a)(r,e);var t=Object(H.a)(r);function r(){return Object(M.a)(this,r),t.apply(this,arguments)}return Object(q.a)(r,[{key:"render",value:function(){return Object(ee.jsx)(se.a,{className:"site-page-header-responsive",extra:[Object(ee.jsx)(u.b,{to:"/users",children:Object(ee.jsx)($.a,{type:"text",style:{color:"#fff"},children:"Users"})},"1"),Object(ee.jsx)(u.b,{to:"/stars",children:Object(ee.jsx)($.a,{type:"text",style:{color:"#fff"},children:"Stars"})},"1")],style:{backgroundColor:"#00334E"}})}}]),r}(n.Component)),ce=function(e){Object(z.a)(r,e);var t=Object(H.a)(r);function r(e){var n;return Object(M.a)(this,r),(n=t.call(this,e)).state={mounted:!1},n}return Object(q.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"render",value:function(){var e=this.props.usersIds;return Object(ee.jsx)("div",{className:"main-wrapper",children:Object(ee.jsxs)("main",{children:[Object(ee.jsx)(ae,{}),Object(ee.jsx)("div",{className:"content-wrapper",children:Object(ee.jsxs)(J.d,{children:[Object(ee.jsx)(J.b,{exact:!0,path:"/",render:function(){return Object(ee.jsx)(J.a,{to:"/users"})}}),Object(ee.jsx)(J.b,{path:"/users",component:function(){return Object(ee.jsx)(ne,{userIds:e})}}),Object(ee.jsx)(J.b,{path:"*",render:function(){return Object(ee.jsx)("div",{children:"Error 404"})}})]})})]})})}}]),r}(n.Component),ue=Object(i.c)((function(e){return{usersIds:e.users.usersIds,error:U(e,"fetchUsers"),isFetching:E(e,"fetchUsers")}}),{fetchUsers:function(){return F("fetchUsers",function(){var e=Object(f.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getUsers();case 2:if(!(r=e.sent)){e.next=6;break}return t({type:C,data:r}),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})(ce),ie=Object(J.g)(ue);r(131);var oe=function(){return Object(ee.jsx)(u.a,{children:Object(ee.jsx)(i.a,{store:L,children:Object(ee.jsx)(ie,{})})})},de=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,238)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;r(e),n(e),s(e),a(e),c(e)}))};r(131),c.a.render(Object(ee.jsx)(s.a.StrictMode,{children:Object(ee.jsx)(oe,{})}),document.getElementById("root")),de()}},[[230,1,2]]]);
//# sourceMappingURL=main.29135086.chunk.js.map