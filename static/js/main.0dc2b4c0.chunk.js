(this.webpackJsonpspa_user_list=this.webpackJsonpspa_user_list||[]).push([[0],{130:function(e,t,r){},131:function(e,t,r){},152:function(e,t,r){},159:function(e,t,r){},228:function(e,t,r){},230:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r.n(n),c=r(31),a=r.n(c),u=(r(152),r(80)),i=r(40),o=r(74),l=r(133),d=r(57),j=r(23),f=r(24),b=r.n(f),p=r(36),h="app/SET_IS_FETCHING",O="app/SET_ERROR",x=function(e,t){return{type:h,key:e,status:t}},v=function(e,t){return{type:O,key:e,message:t}},m={isFetching:{},error:{}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:if(e.isFetching[t.key]&&!t.status){var r=Object(j.a)({},e);return delete r.isFetching[t.key],r}return!e.isFetching[t.key]&&t.status?Object(j.a)(Object(j.a)({},e),{},{isFetching:Object(j.a)(Object(j.a)({},e.isFetching),{},Object(d.a)({},t.key,t.status))}):e;case O:if(e.error[t.key]&&!t.message){var n=Object(j.a)({},e);return delete n.error[t.key],n}return t.message?Object(j.a)(Object(j.a)({},e),{},{error:Object(j.a)(Object(j.a)({},e.error),{},Object(d.a)({},t.key,{message:t.message}))}):e;default:return e}},y=r(143),k=r(115);r(158),k.a.initializeApp({apiKey:"AIzaSyCgj4ixMcBf3GkAKxEgc9nl3io8g0nVGEI",authDomain:"testing-fb-server.firebaseapp.com",projectId:"testing-fb-server"});var w=k.a.firestore(),I={getUsers:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,w.collection("users").get();case 3:return e.sent.forEach((function(e){var r=e.id,n=e.data();t.push(Object(j.a)(Object(j.a)({},n),{},{id:r}))})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addUser:function(e){return Object(p.a)(b.a.mark((function t(){var r,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={name:e.name,phone:e.phone,surname:"surname"},t.next=3,w.collection("users").add(r);case 3:if(!(n=t.sent)||!n.id){t.next=6;break}return t.abrupt("return",Object(j.a)(Object(j.a)({},r),{},{id:n.id}));case 6:case"end":return t.stop()}}),t)})))()},updateUser:function(e){return Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.collection("users").doc(e.id).set(e);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.collection("users").doc(e).delete();case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})))()}},E=function(e,t){return!!e.app.isFetching[t]},S=function(e,t){return e.app.error[t]?e.app.error[t]:null},U=r(144);function C(e,t){return function(){var r=Object(p.a)(b.a.mark((function r(n,s){var c,a,u,o;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,E(s(),e)){r.next=8;break}return Object(i.b)((function(){n(v(e,null)),n(x(e,!0))})),r.next=6,t(n,s);case 6:c=r.sent,Object(i.b)((function(){n(x(e,!1)),c||n(v(e,"Nothing Found"))}));case 8:r.next=16;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0),o=(null===(a=r.t0.data)||void 0===a?void 0:a.message)?null===(u=r.t0.data)||void 0===u?void 0:u.message:"Something went wrong. Try again later.",U.b.error(o),Object(i.b)((function(){n(v(e,o)),n(x(e,!1))}));case 16:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e,t){return r.apply(this,arguments)}}()}var F="users/SET_FETCHED_USERS",N="users/SET_EDITING_USER",_="users/UPDATE_USER_SUCCESS",T="users/DELETE_USER_SUCCESS",P=function(e){return{type:T,userId:e}},R="_NEW_USER",D={id:R,name:"",surname:"",phone:""},M={users:Object(d.a)({},R,D),usersIds:[],editingUserId:null},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:var r=Object(j.a)({},e),n=[];return t.data.forEach((function(e){r.users[e.id]=e,n.push(e.id)})),r.usersIds=n,r;case _:var s=Object(j.a)({},e);return e.users[t.data.id]?s.users[t.data.id]=Object(j.a)(Object(j.a)({},s.users[t.data.id]),t.data):(s.usersIds=[].concat(Object(y.a)(s.usersIds),[t.data.id]),s.users[t.data.id]=t.data),e.editingUserId&&(s.editingUserId=null),s;case T:var c=Object(j.a)({},e);return delete c.users[t.userId],c.usersIds=c.usersIds.filter((function(e){return e!==t.userId})),c;case N:return Object(j.a)(Object(j.a)({},e),{},{editingUserId:t.data});default:return e}},G=Object(o.c)({app:g,users:A}),L=Object(o.d)(G,Object(o.a)(l.a)),B=r(94),W=r(95),q=r(99),z=r(98),H=r(18),J=r(147),K=r(236),V=r(237),X=function(e,t){return e.users.users[t]?e.users.users[t]:null},Y=function(e,t){return e.users.editingUserId===t},Q=r(234),Z=r(235),$=r(76),ee=(r(159),r(9)),te=function(e){var t=e.user,r=Object(i.d)(),n=Object(i.e)((function(e){return{loading:E(e,"user")}})).loading;return Object(ee.jsxs)(Q.a,{className:"row",name:"user",initialValues:t||{},onFinish:function(e){r(function(e){return C("user",function(){var t=Object(p.a)(b.a.mark((function t(r){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id!==R){t.next=6;break}return t.next=3,I.addUser(e);case 3:n=t.sent,t.next=9;break;case 6:return t.next=8,I.updateUser(e);case 8:n=t.sent;case 9:if(!n){t.next=12;break}return r({type:_,data:n}),t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(Object(j.a)({id:t?t.id:R},e))),console.log("Success:",e)},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(ee.jsx)(Q.a.Item,{name:"name",rules:[{required:!0,message:"Please input your username!"}],children:Object(ee.jsx)(Z.a,{placeholder:"Username"})}),Object(ee.jsx)(Q.a.Item,{name:"phone",rules:[{required:!0,message:"Please input your phone!"}],children:Object(ee.jsx)(Z.a,{placeholder:"Phone"})}),Object(ee.jsx)(Q.a.Item,{children:Object(ee.jsx)($.a,{type:"primary",htmlType:"submit",loading:n,children:"Submit"})})]})},re=(r(130),function(e){var t=e.userId,r=Object(i.e)((function(e){return{user:X(e,t),isEditing:Y(e,t)}})),s=r.user,c=r.isEditing,a=Object(i.d)(),u=Object(n.useCallback)((function(){a({type:N,data:c?null:t})}),[c]),o=Object(n.useCallback)((function(){a(function(e){return C("user",function(){var t=Object(p.a)(b.a.mark((function t(r){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.deleteUser(e);case 2:if(!t.sent){t.next=6;break}return r(P(e)),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(t))}),[c]);return s?c?Object(ee.jsxs)("div",{className:"user-item-wrapper",children:[Object(ee.jsx)(te,{user:s}),Object(ee.jsx)(J.a,{onClick:u,className:"fixed-delete-button"})]}):Object(ee.jsxs)("div",{className:"user-item-wrapper",children:[Object(ee.jsx)(K.a,{className:"user-info-icon"}),Object(ee.jsxs)("div",{className:"row user-info",onDoubleClick:u,children:[Object(ee.jsxs)("span",{children:[Object(ee.jsx)("small",{style:{margin:"0 1rem"},children:"Name:"}),s.name]}),Object(ee.jsxs)("span",{children:[Object(ee.jsx)("small",{style:{margin:"0 1rem"},children:"Phone:"}),s.phone]})]}),Object(ee.jsx)(V.a,{style:{color:"#ff0000"},onClick:o,className:"fixed-delete-button"})]}):null}),ne=function(e){var t=e.userIds;return Object(ee.jsxs)("div",{className:"user-list-page",children:[Object(ee.jsxs)("div",{style:{padding:"20px"},children:[Object(ee.jsx)("h2",{children:"Add new user."}),Object(ee.jsx)(te,{})]}),Object(ee.jsx)("div",{className:"user-list-wrapper",children:t.map((function(e){return Object(ee.jsx)(re,{userId:e})}))})]})},se=r(233),ce=(r(228),function(e){Object(q.a)(r,e);var t=Object(z.a)(r);function r(){return Object(B.a)(this,r),t.apply(this,arguments)}return Object(W.a)(r,[{key:"render",value:function(){return Object(ee.jsx)(se.a,{className:"site-page-header-responsive",extra:[Object(ee.jsx)(u.b,{to:"/users",children:Object(ee.jsx)($.a,{type:"text",style:{color:"#fff"},children:"Users"})},"1"),Object(ee.jsx)(u.b,{to:"/stars",children:Object(ee.jsx)($.a,{type:"text",style:{color:"#fff"},children:"Stars"})},"1")],style:{backgroundColor:"#00334E"}})}}]),r}(n.Component)),ae=function(){var e=n.createRef(),t=n.createRef(),r=Object(n.useRef)(null),s=Object(n.useRef)(null),c=Object(n.useRef)(null),a=["red","blue","green","yellow","black"],u=[{x:0,y:0},{x:1,y:0},{x:.5,y:.5},{x:0,y:1},{x:1,y:1}],i=600;Object(n.useEffect)((function(){var e=function(e){return e*i+(.5===e?-25:e>0?-60:60)},t=a.map((function(t,r){var n=u[r],s=n.x,c=n.y;return function(e,t,r,n,s){var c=[],a=Math.PI/2*3,u=e,i=t,o=Math.PI/r;c.push({x:e,y:t-n});for(var l=0;l<r;l++)u=e+Math.cos(a)*n,i=t+Math.sin(a)*n,c.push({x:u,y:i}),a+=o,u=e+Math.cos(a)*s,i=t+Math.sin(a)*s,c.push({x:u,y:i}),a+=o;return c.push({x:e,y:t-n}),c}(e(s),e(c),5,50,30)}));c.current=t}),[]),Object(n.useEffect)((function(){if(e&&e.current){r.current=e.current.getContext("2d"),s.current=t.current.getContext("2d");var n=r.current;n.canvas.width=i,n.canvas.height=i,s.current.canvas.width=i,s.current.canvas.height=50,a.forEach((function(e,t){d(c.current[t],a[t])})),o("white")}}),[]);var o=function(e){var t=s.current;t&&(t.rect(0,0,i,50),t.fillStyle=e,t.fill(),t.lineWidth=5,t.strokeStyle="grey",t.stroke())},l=function(e){var t=new Path2D;return e.forEach((function(e,r){var n=e.x,s=e.y;0===r?t.moveTo(n,s):t.lineTo(n,s)})),t.closePath(),t},d=function(e,t){var n=r.current,s=l(e);n.lineWidth=5,n.strokeStyle=t,n.stroke(s),n.fillStyle=t,n.fill(s)};return Object(ee.jsxs)("div",{className:"col",children:[Object(ee.jsx)("canvas",{ref:e,onClick:function(t){if(c&&e.current){var n={x:t.pageX-t.target.offsetLeft,y:t.clientY-t.target.offsetTop},s=r.current,u="white";c.current.forEach((function(e,t){var r=l(e);s.isPointInPath(r,n.x,n.y)&&(u=a[t])})),o(u)}}}),Object(ee.jsx)("canvas",{ref:t})]})},ue=function(e){Object(q.a)(r,e);var t=Object(z.a)(r);function r(e){var n;return Object(B.a)(this,r),(n=t.call(this,e)).state={mounted:!1},n}return Object(W.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"render",value:function(){var e=this.props.usersIds;return Object(ee.jsx)("div",{className:"main-wrapper",children:Object(ee.jsxs)("main",{children:[Object(ee.jsx)(ce,{}),Object(ee.jsx)("div",{className:"content-wrapper",children:Object(ee.jsxs)(H.d,{children:[Object(ee.jsx)(H.b,{exact:!0,path:"/",render:function(){return Object(ee.jsx)(H.a,{to:"/users"})}}),Object(ee.jsx)(H.b,{path:"/users",component:function(){return Object(ee.jsx)(ne,{userIds:e})}}),Object(ee.jsx)(H.b,{path:"/stars",component:function(){return Object(ee.jsx)(ae,{})}}),Object(ee.jsx)(H.b,{path:"*",render:function(){return Object(ee.jsx)("div",{children:"Error 404"})}})]})})]})})}}]),r}(n.Component),ie=Object(i.c)((function(e){return{usersIds:e.users.usersIds,error:S(e,"fetchUsers"),isFetching:E(e,"fetchUsers")}}),{fetchUsers:function(){return C("fetchUsers",function(){var e=Object(p.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getUsers();case 2:if(!(r=e.sent)){e.next=6;break}return t({type:F,data:r}),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})(ue),oe=Object(H.g)(ie);r(131);var le=function(){return Object(ee.jsx)(u.a,{children:Object(ee.jsx)(i.a,{store:L,children:Object(ee.jsx)(oe,{})})})},de=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,238)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;r(e),n(e),s(e),c(e),a(e)}))};r(131),a.a.render(Object(ee.jsx)(s.a.StrictMode,{children:Object(ee.jsx)(le,{})}),document.getElementById("root")),de()}},[[230,1,2]]]);
//# sourceMappingURL=main.0dc2b4c0.chunk.js.map